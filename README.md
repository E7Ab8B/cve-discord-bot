# CVE Discord Bot

A simple Discord bot which is designed to help users stay on top of the latest
security vulnerabilities using the [National Vulnerability Database
(NVD) API](https://nvd.nist.gov/developers/vulnerabilities) from NIST. It
includes several key features, such as:

- Channel Creation: With this feature, users can create dedicated channels for
  receiving notifications about newly reported CVEs. The bot will automatically
  post new CVEs to these channels, keeping users informed in real-time.

- Label Creation: To help users organize and prioritize CVEs, the bot allows
  them to create custom labels. These labels can be used to group or categorize
  CVEs based on affected software.

- CVE Retrieval: Users can easily retrieve detailed information about specific
  CVEs using the bot's retrieval feature. Simply enter the CVE ID, and the bot
  will provide a summary of the vulnerability, affected software versions,
  severity level, and other important details.

## Bot Setup

1. Obtain a Discord Bot token
    ([Instructions](https://discordpy.readthedocs.io/en/stable/discord.html)).

2. Create a `.env` file.

    An example of this file can be found in [.env-example](.env-example).

    The expected variables are listed in the
    [Environment Variables](#environment-variables) section.

3. Build, start, and attach containers using the following command:

    ```sh
    docker compose -f docker-compose.yaml -f docker-compose.prod.yaml up -d
    ```

    Alternatively, you can use the following command, which is an alias for
    docker compose -f docker-compose.yaml -f docker-compose.prod.yaml:

    ```sh
    . ./prod-compose.sh up -d
    ```

4. Run migrations by executing the following command:

    ```sh
    docker compose -f docker-compose.yaml -f docker-compose.prod.yaml exec bot aerich upgrade
    ```

## Environment Variables

| Environment Variable | Required | Default
|-----|------|------|
| BOT_TOKEN | ✅ |
| DATABASE_URL | ✅ |
| DEBUG | | False
| LOGGING_LEVEL | | INFO
| TIME_ZONE | | UTC

## Commands

### Command prefix

``c-``

### Member

| Name | Description
|-----|------|
| get-cve | Returns an embed with the information about the CVE from NIST API
| channel list | Lists all CVE channels in a server
| channel show | Shows information about a CVE channel
| label list | Lists all labels
| label show | Shows information about a label

### Admin

| Name | Description
|-----|------|
| channel-add | Adds a channel to send notifications about newly added CVEs with provided labels
| label-attach | Attaches a label to notification channel
| label-detach | Detaches a label from notification channel

### Bot Owner

| Name | Description
|-----|------|
| label-add | Adds a label for CVEs
| jsk | [jishaku](https://github.com/Gorialis/jishaku) commands
